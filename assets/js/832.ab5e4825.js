(window.webpackJsonp=window.webpackJsonp||[]).push([[832],{1416:function(a,s,t){"use strict";t.r(s);var e=t(2),n=Object(e.a)({},(function(){var a=this,s=a.$createElement,t=a._self._c||s;return t("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[t("p",[a._v("watch命令能够将其他命令的输出定时输出到终端，从而实现监听的能力，在我们要对一些命令状态进行实时监听的场景中，有非常好的应用场景。")]),a._v(" "),t("h2",{attrs:{id:"参数"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#参数"}},[a._v("#")]),a._v(" 参数")]),a._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$watch")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-h")]),a._v("\n\nUsage:\n "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("watch")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("options"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("command")]),a._v("\n\nOptions:\n  -b, "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--beep")]),a._v("             如果命令具有非零退出，则发出蜂鸣音\n  -c, "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--color")]),a._v("            解释ANSI颜色和样式序列\n  -d, --differences"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("permanent"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\n                         高亮显示两次更新之间的变化\n  -e, "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--errexit")]),a._v("          如果命令有非零退出，则退出\n  -g, "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--chgexit")]),a._v("          当命令的输出发生变化时退出\n  -n, "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--interval")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("secs"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("  两次更新之间的等待秒数\n  -p, "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--precise")]),a._v("          尝试以精确的时间间隔运行命令\n  -t, --no-title         关闭watch命令在顶部的时间间隔,命令，当前时间的输出\n  -x, "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--exec")]),a._v("             将命令传递给exec，而不是 "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"sh -c"')]),a._v("\n\n -h, "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--help")]),a._v("     display this "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("help")]),a._v(" and "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("exit")]),a._v("\n -v, "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--version")]),a._v("  output version information and "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("exit")]),a._v("\n\nFor "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("more")]),a._v(" details see watch"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("1")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(".\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br"),t("span",{staticClass:"line-number"},[a._v("4")]),t("br"),t("span",{staticClass:"line-number"},[a._v("5")]),t("br"),t("span",{staticClass:"line-number"},[a._v("6")]),t("br"),t("span",{staticClass:"line-number"},[a._v("7")]),t("br"),t("span",{staticClass:"line-number"},[a._v("8")]),t("br"),t("span",{staticClass:"line-number"},[a._v("9")]),t("br"),t("span",{staticClass:"line-number"},[a._v("10")]),t("br"),t("span",{staticClass:"line-number"},[a._v("11")]),t("br"),t("span",{staticClass:"line-number"},[a._v("12")]),t("br"),t("span",{staticClass:"line-number"},[a._v("13")]),t("br"),t("span",{staticClass:"line-number"},[a._v("14")]),t("br"),t("span",{staticClass:"line-number"},[a._v("15")]),t("br"),t("span",{staticClass:"line-number"},[a._v("16")]),t("br"),t("span",{staticClass:"line-number"},[a._v("17")]),t("br"),t("span",{staticClass:"line-number"},[a._v("18")]),t("br"),t("span",{staticClass:"line-number"},[a._v("19")]),t("br"),t("span",{staticClass:"line-number"},[a._v("20")]),t("br"),t("span",{staticClass:"line-number"},[a._v("21")]),t("br")])]),t("h2",{attrs:{id:"常用例子"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#常用例子"}},[a._v("#")]),a._v(" 常用例子")]),a._v(" "),t("p",[a._v("比较常用的参数有 "),t("code",[a._v("-n")]),a._v(" "),t("code",[a._v("-d")]),a._v("。")]),a._v(" "),t("p",[a._v("监听当前目录下文件变化：")]),a._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("watch")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-n1")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-d")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("ls")]),a._v("\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br")])]),t("p",[a._v("监听系统中TCP连接状态的变化：")]),a._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("watch")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-n1")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-d")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v("\"netstat -an  | awk '/tcp/ {print \\"),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$6")]),a._v("}'| sort | uniq -c\"")]),a._v("\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br")])]),t("blockquote",[t("ul",[t("li",[a._v("watch后边如果带有管道符，则用双引号将后边的命令包裹成一个整体。")]),a._v(" "),t("li",[a._v("另外，当awk的print被双引号包裹之后，需要在$符号前边加个转义符。")])])]),a._v(" "),t("p",[t("img",{attrs:{src:"http://t.eryajf.net/imgs/2022/10/7e7084eb4345ad0d.jpg",alt:""}})])])}),[],!1,null,null,null);s.default=n.exports}}]);