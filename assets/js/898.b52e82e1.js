(window.webpackJsonp=window.webpackJsonp||[]).push([[898],{1482:function(t,e,_){"use strict";_.r(e);var r=_(2),v=Object(r.a)({},(function(){var t=this,e=t.$createElement,_=t._self._c||e;return _("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[_("p",[t._v("GitHub的Markdown目前不支持直接"),_("code",[t._v("[TOC]")]),t._v("渲染文章的目录，有些README则需要这样的效果，可以借助外部工具进行生成，也可以借助 "),_("code",[t._v("GitHub Actions")]),t._v(" 自动生成，本文就介绍这种方式。")]),t._v(" "),_("p",[t._v("所用Actions："),_("a",{attrs:{href:"https://github.com/marketplace/actions/toc-generator",target:"_blank",rel:"noopener noreferrer"}},[t._v("TOC Generator"),_("OutboundLink")],1)]),t._v(" "),_("p",[t._v("使用配置其实非常简单，基本上阅读完官方介绍文档就可以上手使用了，这里说一两个需要注意的地方。")]),t._v(" "),_("p",[t._v("首先需要在将要生成目录的文件内，指定目录生成位置，e.g. "),_("code",[t._v("README.md")]),t._v("，在要生成的地方添加如下内容：")]),t._v(" "),_("div",{staticClass:"language- line-numbers-mode"},[_("pre",{pre:!0,attrs:{class:"language-text"}},[_("code",[t._v("\x3c!-- START doctoc --\x3e\n\x3c!-- END doctoc --\x3e\n")])]),t._v(" "),_("div",{staticClass:"line-numbers-wrapper"},[_("span",{staticClass:"line-number"},[t._v("1")]),_("br"),_("span",{staticClass:"line-number"},[t._v("2")]),_("br")])]),_("p",[t._v("项目运行之后，会将目录添加在如上两段注释的中间。")]),t._v(" "),_("p",[t._v("然后添加Actions配置文件，e.g. "),_("code",[t._v(".github/workflows/toc.yml")]),t._v("：")]),t._v(" "),_("div",{staticClass:"language-yml line-numbers-mode"},[_("pre",{pre:!0,attrs:{class:"language-yml"}},[_("code",[_("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("on")]),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" push\n"),_("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" TOC Generator\n"),_("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("jobs")]),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),_("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("generateTOC")]),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),_("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" TOC Generator\n    "),_("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("runs-on")]),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" ubuntu"),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("latest\n    "),_("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("steps")]),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),_("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("uses")]),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" technote"),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("space/toc"),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("generator@v4\n")])]),t._v(" "),_("div",{staticClass:"line-numbers-wrapper"},[_("span",{staticClass:"line-number"},[t._v("1")]),_("br"),_("span",{staticClass:"line-number"},[t._v("2")]),_("br"),_("span",{staticClass:"line-number"},[t._v("3")]),_("br"),_("span",{staticClass:"line-number"},[t._v("4")]),_("br"),_("span",{staticClass:"line-number"},[t._v("5")]),_("br"),_("span",{staticClass:"line-number"},[t._v("6")]),_("br"),_("span",{staticClass:"line-number"},[t._v("7")]),_("br"),_("span",{staticClass:"line-number"},[t._v("8")]),_("br")])]),_("p",[t._v("接着需要调整下项目的Actions权限，在GitHub上点击"),_("code",[t._v("settings")]),t._v("--\x3e "),_("code",[t._v("actions")]),t._v(" --\x3e "),_("code",[t._v("General")]),t._v(" --\x3e "),_("code",[t._v("Workflow permissions")]),t._v(" --\x3e 选择 "),_("code",[t._v("Read and write permissions")]),t._v("。")]),t._v(" "),_("p",[_("img",{attrs:{src:"http://t.eryajf.net/imgs/2022/05/41e13b564c3c4210.jpg",alt:""}})]),t._v(" "),_("p",[t._v("配置调整完成之后，就可以push项目看效果了，当然这里也可以通过"),_("code",[t._v("GitHub_Token")]),t._v("的方式认证，就不赘述了。")]),t._v(" "),_("p",[_("code",[t._v("配置列表：")])]),t._v(" "),_("div",{pre:!0},[_("table",[_("thead",[_("tr",[_("th",[t._v("name")]),t._v(" "),_("th",[t._v("description")]),t._v(" "),_("th",[t._v("default")]),t._v(" "),_("th",[t._v("required")]),t._v(" "),_("th",[t._v("e.g.")])])]),t._v(" "),_("tbody",[_("tr",[_("td",[t._v("TARGET_PATHS")]),t._v(" "),_("td",[t._v("Target file path. (Comma separated, "),_("a",{pre:!0,attrs:{href:"https://github.com/thlorenz/doctoc#adding-toc-to-individual-files",target:"_blank",rel:"noopener noreferrer"}},[t._v("Detail"),_("OutboundLink",{pre:!0})],1),t._v(")")]),t._v(" "),_("td",[_("code",[t._v("README*.md")])]),t._v(" "),_("td",[t._v("true")]),t._v(" "),_("td",[_("code",[t._v("README*.md,CHANGELOG.md")]),t._v(", "),_("code",[t._v(".")])])]),t._v(" "),_("tr",[_("td",[t._v("TOC_TITLE")]),t._v(" "),_("td",[t._v("TOC Title")]),t._v(" "),_("td",[_("code",[t._v("**Table of Contents**")])]),t._v(" "),_("td"),t._v(" "),_("td",[_("code",[t._v("''")])])]),t._v(" "),_("tr",[_("td",[t._v("MAX_HEADER_LEVEL")]),t._v(" "),_("td",[t._v("Maximum heading level. ("),_("a",{pre:!0,attrs:{href:"https://github.com/thlorenz/doctoc#specifying-a-maximum-heading-level-for-toc-entries",target:"_blank",rel:"noopener noreferrer"}},[t._v("Detail"),_("OutboundLink",{pre:!0})],1),t._v(")")]),t._v(" "),_("td"),t._v(" "),_("td"),t._v(" "),_("td",[_("code",[t._v("3")])])]),t._v(" "),_("tr",[_("td",[t._v("CUSTOM_MODE")]),t._v(" "),_("td",[t._v("Whether it is custom mode("),_("a",{pre:!0,attrs:{href:"https://github.com/technote-space/toc-generator/blob/main/samples/README.horizontal.md",target:"_blank",rel:"noopener noreferrer"}},[t._v("Generated Example"),_("OutboundLink",{pre:!0})],1),t._v(")")]),t._v(" "),_("td",[_("code",[t._v("false")])]),t._v(" "),_("td"),t._v(" "),_("td",[_("code",[t._v("true")])])]),t._v(" "),_("tr",[_("td",[t._v("CUSTOM_TEMPLATE")]),t._v(" "),_("td",[t._v("Custom template for custom mode")]),t._v(" "),_("td",[_("code",[t._v('<p align="center">${ITEMS}</p>')])]),t._v(" "),_("td"),t._v(" "),_("td")]),t._v(" "),_("tr",[_("td",[t._v("ITEM_TEMPLATE")]),t._v(" "),_("td",[t._v("Item template for custom mode")]),t._v(" "),_("td",[_("code",[t._v('<a href="${LINK}">${TEXT}</a>')])]),t._v(" "),_("td"),t._v(" "),_("td")]),t._v(" "),_("tr",[_("td",[t._v("SEPARATOR")]),t._v(" "),_("td",[t._v("Separator for custom mode")]),t._v(" "),_("td",[_("code",[t._v("<span>|</span>")])]),t._v(" "),_("td"),t._v(" "),_("td")]),t._v(" "),_("tr",[_("td",[t._v("FOLDING")]),t._v(" "),_("td",[t._v("Whether to make TOC foldable")]),t._v(" "),_("td",[_("code",[t._v("false")])]),t._v(" "),_("td"),t._v(" "),_("td",[_("code",[t._v("true")])])]),t._v(" "),_("tr",[_("td",[t._v("COMMIT_MESSAGE")]),t._v(" "),_("td",[t._v("Commit message")]),t._v(" "),_("td",[_("code",[t._v("chore(docs): update TOC")])]),t._v(" "),_("td",[t._v("true")]),t._v(" "),_("td",[_("code",[t._v("docs: update TOC")])])]),t._v(" "),_("tr",[_("td",[t._v("COMMIT_NAME")]),t._v(" "),_("td",[t._v("Git commit name")]),t._v(" "),_("td",[_("code",[t._v("${github.actor}")])]),t._v(" "),_("td"),t._v(" "),_("td")]),t._v(" "),_("tr",[_("td",[t._v("COMMIT_EMAIL")]),t._v(" "),_("td",[t._v("Git commit email")]),t._v(" "),_("td",[_("code",[t._v("${github.actor}@users.noreply.github.com")])]),t._v(" "),_("td"),t._v(" "),_("td")]),t._v(" "),_("tr",[_("td",[t._v("CREATE_PR")]),t._v(" "),_("td",[t._v("Whether to create PullRequest")]),t._v(" "),_("td",[_("code",[t._v("false")])]),t._v(" "),_("td"),t._v(" "),_("td",[_("code",[t._v("true")])])]),t._v(" "),_("tr",[_("td",[t._v("CHECK_ONLY_DEFAULT_BRANCH")]),t._v(" "),_("td",[t._v("Whether to check only default branch")]),t._v(" "),_("td",[_("code",[t._v("false")])]),t._v(" "),_("td"),t._v(" "),_("td",[_("code",[t._v("true")])])]),t._v(" "),_("tr",[_("td",[t._v("PR_BRANCH_PREFIX")]),t._v(" "),_("td",[t._v("PullRequest branch prefix")]),t._v(" "),_("td",[_("code",[t._v("toc-generator/")])]),t._v(" "),_("td",[t._v("true")]),t._v(" "),_("td")]),t._v(" "),_("tr",[_("td",[t._v("PR_BRANCH_NAME")]),t._v(" "),_("td",[t._v("PullRequest branch name "),_("a",{pre:!0,attrs:{href:"https://github.com/marketplace/actions/toc-generator#context-variables",target:"_blank",rel:"noopener noreferrer"}},[t._v("Context variables"),_("OutboundLink",{pre:!0})],1)]),t._v(" "),_("td",[_("code",[t._v("update-toc-${PR_ID}")])]),t._v(" "),_("td",[t._v("true")]),t._v(" "),_("td",[_("code",[t._v("toc-${PR_NUMBER}")])])]),t._v(" "),_("tr",[_("td",[t._v("PR_TITLE")]),t._v(" "),_("td",[t._v("PullRequest title "),_("a",{pre:!0,attrs:{href:"https://github.com/marketplace/actions/toc-generator#context-variables",target:"_blank",rel:"noopener noreferrer"}},[t._v("Context variables"),_("OutboundLink",{pre:!0})],1)]),t._v(" "),_("td",[_("code",[t._v("chore(docs): update TOC (${PR_MERGE_REF})")])]),t._v(" "),_("td",[t._v("true")]),t._v(" "),_("td",[_("code",[t._v("docs: update TOC")])])]),t._v(" "),_("tr",[_("td",[t._v("PR_BODY")]),t._v(" "),_("td",[t._v("PullRequest body "),_("a",{pre:!0,attrs:{href:"https://github.com/marketplace/actions/toc-generator#context-pr-variables",target:"_blank",rel:"noopener noreferrer"}},[t._v("Context PR variables"),_("OutboundLink",{pre:!0})],1)]),t._v(" "),_("td",[_("a",{pre:!0,attrs:{href:"https://github.com/technote-space/toc-generator/blob/main/action.yml",target:"_blank",rel:"noopener noreferrer"}},[t._v("action.yml"),_("OutboundLink",{pre:!0})],1)]),t._v(" "),_("td",[t._v("true")]),t._v(" "),_("td")]),t._v(" "),_("tr",[_("td",[t._v("PR_COMMENT_BODY")]),t._v(" "),_("td",[t._v("PullRequest body for comment "),_("a",{pre:!0,attrs:{href:"https://github.com/marketplace/actions/toc-generator#context-pr-variables",target:"_blank",rel:"noopener noreferrer"}},[t._v("Context PR variables"),_("OutboundLink",{pre:!0})],1)]),t._v(" "),_("td",[_("a",{pre:!0,attrs:{href:"https://github.com/technote-space/toc-generator/blob/main/action.yml",target:"_blank",rel:"noopener noreferrer"}},[t._v("action.yml"),_("OutboundLink",{pre:!0})],1)]),t._v(" "),_("td"),t._v(" "),_("td")]),t._v(" "),_("tr",[_("td",[t._v("PR_CLOSE_MESSAGE")]),t._v(" "),_("td",[t._v("Message body when closing PullRequest")]),t._v(" "),_("td",[_("code",[t._v("This PR has been closed because it is no longer needed.")])]),t._v(" "),_("td"),t._v(" "),_("td")]),t._v(" "),_("tr",[_("td",[t._v("TARGET_BRANCH_PREFIX")]),t._v(" "),_("td",[t._v("Filter by branch name")]),t._v(" "),_("td"),t._v(" "),_("td"),t._v(" "),_("td",[_("code",[t._v("release/")])])]),t._v(" "),_("tr",[_("td",[t._v("INCLUDE_LABELS")]),t._v(" "),_("td",[t._v("Labels used to check if the PullRequest has it")]),t._v(" "),_("td"),t._v(" "),_("td"),t._v(" "),_("td",[_("code",[t._v("Label1, Label2")])])]),t._v(" "),_("tr",[_("td",[t._v("OPENING_COMMENT")]),t._v(" "),_("td",[t._v("Opening comment (for other than DocToc)")]),t._v(" "),_("td",[_("code",[t._v("\x3c!-- toc")])]),t._v(" "),_("td"),t._v(" "),_("td")]),t._v(" "),_("tr",[_("td",[t._v("CLOSING_COMMENT")]),t._v(" "),_("td",[t._v("Closing comment (for other than DocToc)")]),t._v(" "),_("td",[_("code",[t._v("\x3c!-- tocstop")])]),t._v(" "),_("td"),t._v(" "),_("td")]),t._v(" "),_("tr",[_("td",[t._v("GITHUB_TOKEN")]),t._v(" "),_("td",[t._v("Access token")]),t._v(" "),_("td",[_("code",[t._v("${{github.token}}")])]),t._v(" "),_("td",[t._v("true")]),t._v(" "),_("td",[_("code",[t._v("${{secrets.ACCESS_TOKEN}}")])])])])])]),_("p",[t._v("可根据自己的实际需求以及情况进行配置！")])])}),[],!1,null,null,null);e.default=v.exports}}]);